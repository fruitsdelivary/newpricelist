<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دليفري الخضار والفاكهة..قائمة الأسعار ونموذج الطلب</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', system-ui, -apple-system, sans-serif; background-color: #f7f9fb; }
        .static-row, .interactive-row { transition: background-color 0.2s; }
        .static-row:hover, .interactive-row:hover { background-color: #f3f4f6; }
        .quantity-select { height: 40px; text-align-last: center; padding: 0.25rem 0.5rem; border: 1px solid #ccc; border-radius: 0.375rem; font-size: 0.9rem; appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: left 0.5rem center; background-size: 1em; padding-left: 2rem; }
        .offer-badge { background: linear-gradient(to right, #ef4444, #b91c1c); color: white; padding: 2px 10px; border-radius: 9999px; font-size: 0.75rem; font-weight: bold; margin-right: 10px; display: inline-block; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-2xl p-6 md:p-10 border-4 border-green-500/50">

        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-extrabold text-green-700 mb-4" id="main-title">💰أسعار اليوم💰</h1>
            <div class="mb-6">
                <img src="https://i.ibb.co/3yfhVHXj/1764874410467.png" alt="شعار المتجر" class="mx-auto w-24 h-24 md:w-32 md:h-32 rounded-full border-4 border-green-300 shadow-xl object-cover">
                <p class="text-lg font-bold text-gray-600 mt-2">خُبراء الخضار والفاكهة</p>
            </div>
        </header>
        
        <div id="price-list-view">
            <button onclick="toggleView('order-form-view')" class="w-full mb-8 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl shadow-2xl transform hover:scale-105 text-xl transition duration-300">
                🛒 ابدأ طلبك الآن! (نموذج الطلب السريع)
            </button>

            <div class="bg-red-100 text-red-800 font-extrabold p-3 rounded-xl shadow-lg border-4 border-red-500 mb-8 text-center text-xl animate-pulse">
                🔴 الأسعار قابلة للتغيير خلال اليوم 🔴
            </div>
            
            <div class="mb-8 p-4 bg-gray-50 rounded-xl shadow-inner">
                <input type="text" id="search-input-static" onkeyup="filterItems('static')" placeholder="ابحث عن خضروات أو فواكه..." class="w-full p-3 border border-gray-300 rounded-lg text-right text-lg" dir="rtl">
            </div>

            <section class="border border-gray-200 rounded-xl overflow-hidden shadow-lg mb-10">
                <h2 class="bg-green-600 text-white text-2xl font-bold p-4 text-center">🥬🥦 خضروات 🥦🥬</h2>
                <div class="p-2"><table class="min-w-full"><tbody id="vegetables-tbody-static" class="bg-white divide-y divide-gray-100"></tbody></table></div>
            </section>

            <section class="border border-gray-200 rounded-xl overflow-hidden shadow-lg mb-10">
                <h2 class="bg-yellow-600 text-white text-2xl font-bold p-4 text-center">🍌🍎 فواكه 🍉🍇</h2>
                <div class="p-2"><table class="min-w-full"><tbody id="fruits-tbody-static" class="bg-white divide-y divide-gray-100"></tbody></table></div>
            </section>
        </div>

        <div id="order-form-view" style="display: none;">
            <button onclick="toggleView('price-list-view')" class="w-full mb-6 bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-xl transition text-lg">🔙 العودة لقائمة الأسعار</button>
            <div class="mb-8 p-4 bg-gray-50 rounded-xl shadow-inner">
                <input type="text" id="search-input-interactive" onkeyup="filterItems('interactive')" placeholder="ابحث لتحديد الكمية..." class="w-full p-3 border border-gray-300 rounded-lg text-right text-lg" dir="rtl">
            </div>
            <form id="order-form" onsubmit="event.preventDefault(); generateWhatsAppOrder();">
                <div class="mb-10 border rounded-xl overflow-hidden shadow-lg">
                    <h2 class="bg-green-600 text-white text-2xl font-bold p-4 text-center">تحديد كميات الخضروات</h2>
                    <table class="min-w-full"><tbody id="vegetables-tbody-interactive" class="bg-white divide-y divide-gray-100"></tbody></table>
                </div>
                <div class="mb-10 border rounded-xl overflow-hidden shadow-lg">
                    <h2 class="bg-yellow-600 text-white text-2xl font-bold p-4 text-center">تحديد كميات الفواكه</h2>
                    <table class="min-w-full"><tbody id="fruits-tbody-interactive" class="bg-white divide-y divide-gray-100"></tbody></table>
                </div>
                <div class="mt-8">
                    <textarea id="notes" rows="4" placeholder="العنوان بالتفصيل ورقم الموبايل وأي ملاحظات..." class="w-full p-4 border border-gray-300 rounded-lg text-right" dir="rtl"></textarea>
                </div>
                <button type="submit" class="w-full mt-10 bg-green-700 hover:bg-green-800 text-white font-bold py-4 px-6 rounded-xl shadow-2xl transform hover:scale-105 text-xl transition duration-300">إرسال الطلب عبر واتساب</button>
            </form>
        </div>

        <footer class="mt-12 pt-6 border-t-2 text-center text-gray-600 font-bold">
             <div class="bg-yellow-50 p-4 rounded-xl border-2 border-yellow-200 mb-6">
                🕒 مواعيد العمل من 10 ص إلى 5 م يومياً ما عدا الجمعة
            </div>
            <a href="http://wa.me/201032872750" target="_blank" class="block mb-4 text-green-600 text-lg">🛵 للطلب: 01032872750</a>
            <a href="https://www.facebook.com/pg/3oroadtawfeer" target="_blank" class="text-blue-600 underline">صفحة الفيسبوك</a>
        </footer>
    </div>

    <script>
        const productsData = [
            // الخضروات
            { name: "بصل أحمر 1", price: 17.5, unit: "كجم", category: "vegetable" },
            { name: "بصل أحمر 2", price: 15.0, unit: "كجم", category: "vegetable" },
            { name: "بصل أبيض", price: 20.0, unit: "كجم", category: "vegetable" },
            { name: "ثوم بلدي", price: 80.0, oldPrice: 100, unit: "كجم", category: "vegetable" },
            { name: "بطاطس تحمير", price: 25.0, unit: "كجم", category: "vegetable" },
            { name: "بطاطس طبخ جديدة", price: 20.0, unit: "كجم", category: "vegetable" },
            { name: "باذنجان مكبب", price: 15.0, unit: "كجم", category: "vegetable" },
            { name: "خيار 1", price: 30.0, unit: "كجم", category: "vegetable" },
            { name: "خيار 2", price: 25.0, unit: "كجم", category: "vegetable" },
            { name: "كوسة", price: 30.0, unit: "كجم", category: "vegetable" },
            { name: "جزر", price: 20.0, unit: "كجم", category: "vegetable" },
            { name: "طماطم جامدة 1", price: 15.0, unit: "كجم", category: "vegetable" },
            { name: "طماطم جامدة 2", price: 12.5, unit: "كجم", category: "vegetable" },
            { name: "طماطم طبخ", price: 8.0, unit: "كجم", category: "vegetable" },
            { name: "ليمون 1", price: 60.0, unit: "كجم", category: "vegetable" },
            { name: "ليمون 2", price: 50.0, unit: "كجم", category: "vegetable" },
            { name: "فلفل أخضر بارد", price: 25.0, unit: "كجم", category: "vegetable" },
            { name: "فلفل أخضر حار", price: 25.0, unit: "كجم", category: "vegetable" },
            { name: "فلفل أحمر بارد", price: 40.0, unit: "كجم", category: "vegetable" },
            { name: "بطاطا", price: 17.5, unit: "كجم", category: "vegetable" },
            { name: "فلفل ألوان", price: 60.0, unit: "كجم", category: "vegetable" },
            { name: "سبانخ (حزمة)", price: 10.0, oldPrice: 12.5, unit: "حزمة", category: "vegetable" },
            { name: "خس بلدي (حزمة)", price: 10.0, unit: "حزمة", category: "vegetable" },
            { name: "شبت وكسبرة", price: 10.0, unit: "ربطة", category: "vegetable" },
            { name: "بقدونس", price: 10.0, unit: "ربطة", category: "vegetable" },
            { name: "فجل", price: 5.0, unit: "ربطة", category: "vegetable" },
            { name: "جرجير", price: 5.0, unit: "ربطة", category: "vegetable" },
            { name: "سريس", price: 5.0, unit: "ربطة", category: "vegetable" },
            { name: "بصل أخضر", price: 10.0, unit: "ربطة", category: "vegetable" },
            { name: "كرات مصري", price: 5.0, unit: "ربطة", category: "vegetable" },
            { name: "نعناع", price: 10.0, unit: "ربطة", category: "vegetable" },
            { name: "زنجبيل فريش", price: 280.0, unit: "كجم", category: "vegetable" },
            { name: "قلقاس", price: 25.0, unit: "كجم", category: "vegetable" },
            { name: "ورق سلق", price: 40.0, unit: "كجم", category: "vegetable" },
            { name: "بسلة 1", price: 30.0, unit: "كجم", category: "vegetable" },
            { name: "بسلة 2", price: 25.0, unit: "كجم", category: "vegetable" },
            { name: "باذنجان حشو", price: 20.0, unit: "كجم", category: "vegetable" },
            { name: "بنجر", price: 30.0, unit: "كجم", category: "vegetable" },
            { name: "خس كابوتشا", price: 25.0, unit: "حبة", category: "vegetable" },
            { name: "مشروم فريش", price: 50.0, oldPrice: 60, unit: "طبق", category: "vegetable" },
            { name: "فاصوليا خضراء", price: 25.0, unit: "كجم", category: "vegetable" },
            { name: "ثوم صيني (٢٠٠جم)", price: 35.0, unit: "حبة", category: "vegetable" },
            { name: "كرنب أحمر (سلطة)", price: 30.0, unit: "حبة", category: "vegetable" },
            { name: "كرنب أبيض (سلطة)", price: 40.0, unit: "حبة", category: "vegetable" },
            { name: "ذرة أصفر (طبق 3 حبة)", price: 60.0, unit: "طبق", category: "vegetable" },
            { name: "شيكارة أرز رويزق 10ك", price: 290.0, unit: "شيكارة", category: "vegetable" },
            // الفواكه
            { name: "موز 1", price: 40.0, unit: "كجم", category: "fruit" },
            { name: "موز 2", price: 35.0, unit: "كجم", category: "fruit" },
            { name: "تفاح أحمر مستورد", price: 80.0, oldPrice: 90, unit: "كجم", category: "fruit" },
            { name: "تفاح أصفر", price: 100.0, unit: "كجم", category: "fruit" },
            { name: "تفاح سكري", price: 100.0, unit: "كجم", category: "fruit" },
            { name: "تفاح أحمر سوري", price: 120.0, unit: "كجم", category: "fruit" },
            { name: "تفاح أصفر سوري", price: 100.0, unit: "كجم", category: "fruit" },
            { name: "فراولة", price: 40.0, unit: "كجم", category: "fruit" },
            { name: "برقوق", price: 130.0, unit: "كجم", category: "fruit" },
            { name: "كيوي وسط", price: 130.0, unit: "كجم", category: "fruit" },
            { name: "برتقال بصره 1", price: 30.0, unit: "كجم", category: "fruit" },
            { name: "برتقال بصره 2", price: 25.0, unit: "كجم", category: "fruit" },
            { name: "برتقال سكري", price: 25.0, unit: "كجم", category: "fruit" },
            { name: "حرنكش", price: 150.0, unit: "كجم", category: "fruit" },
            { name: "جوافة", price: 35.0, unit: "كجم", category: "fruit" },
            { name: "رمان", price: 60.0, unit: "كجم", category: "fruit" },
            { name: "مندولينا", price: 15.0, unit: "كجم", category: "fruit" },
            { name: "يوسفي بلدي 1", price: 30.0, unit: "كجم", category: "fruit" },
            { name: "يوسفي بلدي 2", price: 25.0, unit: "كجم", category: "fruit" },
            { name: "مانجو كيت", price: 80.0, unit: "كجم", category: "fruit" },
            { name: "قشطة عبدالرازق", price: 170.0, unit: "كجم", category: "fruit" },
            { name: "كنتالوب", price: 35.0, oldPrice: 40, unit: "كجم", category: "fruit" },
            { name: "تمر القصيم (١ك)", price: 130.0, unit: "علبة", category: "fruit" },
            { name: "أفوكادو مستورد", price: 250.0, oldPrice: 270, unit: "كجم", category: "fruit" }
        ];

        const WHATSAPP_NUMBER = '201032872750';

        function generatePriceList() {
            let sVeg = '', sFruit = '', iVeg = '', iFruit = '';
            productsData.forEach(p => {
                const badge = p.oldPrice ? `<span class="offer-badge">عرض 🔥</span>` : '';
                const priceHTML = p.oldPrice 
                    ? `<span class="text-gray-400 line-through text-sm ml-2">${p.oldPrice}</span><span class="text-red-600 font-bold">${p.price} ج.م</span>`
                    : `<span>${p.price} ج.م</span>`;

                const sRow = `<tr class="static-row"><td class="px-4 py-3 text-lg font-medium">${p.name} ${badge}</td><td class="px-4 py-3 text-xl font-bold text-right">${priceHTML}</td></tr>`;
                const iRow = `<tr class="interactive-row" data-name="${p.name}" data-unit="${p.unit}"><td class="px-4 py-3 text-lg">${p.name}</td><td class="px-4 py-3 text-center font-bold text-green-700">${p.price} ج.م</td><td class="px-4 py-3"><select class="quantity-select w-full" data-unit="${p.unit}"></select></td></tr>`;
                
                if (p.category === 'vegetable') { sVeg += sRow; iVeg += iRow; }
                else { sFruit += sRow; iFruit += iRow; }
            });
            document.getElementById('vegetables-tbody-static').innerHTML = sVeg;
            document.getElementById('fruits-tbody-static').innerHTML = sFruit;
            document.getElementById('vegetables-tbody-interactive').innerHTML = iVeg;
            document.getElementById('fruits-tbody-interactive').innerHTML = iFruit;
        }

        function generateWeightOptions(unit) {
            let opts = '<option value="0" selected>-- اختر الكمية --</option>';
            if (unit === 'كجم') {
                [0.25, 0.5, 0.75, 1, 1.5, 2, 2.5, 3, 4, 5, 10].forEach(v => {
                    let txt = v < 1 ? (v==0.25?'¼':v==0.5?'½':'¾') + ' كجم' : v + ' كجم';
                    opts += `<option value="${v}">${txt}</option>`;
                });
            } else {
                for(let i=1; i<=10; i++) opts += `<option value="${i}">${i} ${unit}</option>`;
            }
            return opts;
        }

        function toggleView(v) {
            document.getElementById('price-list-view').style.display = v === 'order-form-view' ? 'none' : 'block';
            document.getElementById('order-form-view').style.display = v === 'order-form-view' ? 'block' : 'none';
            window.scrollTo({top:0, behavior:'smooth'});
        }

        function generateWhatsAppOrder() {
            let vegStr = '', fruitStr = '', count = 0;
            document.querySelectorAll('.interactive-row').forEach(row => {
                const sel = row.querySelector('.quantity-select');
                if (parseFloat(sel.value) > 0) {
                    count++;
                    const line = `- ${sel.options[sel.selectedIndex].text} ${row.getAttribute('data-name')}\n`;
                    if (row.closest('table').id.includes('vegetables')) vegStr += line; else fruitStr += line;
                }
            });
            if (count === 0) return alert('الرجاء اختيار صنف واحد على الأقل');
            let msg = `📝 طلب جديد:\n------------------\n`;
            if (vegStr) msg += `🥬 *خضروات:*\n${vegStr}`;
            if (fruitStr) msg += `\n🍎 *فواكه:*\n${fruitStr}`;
            msg += `------------------\n📌 *العنوان والملاحظات:*\n${document.getElementById('notes').value || 'لم يتم إدخال عنوان'}`;
            window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function filterItems(type) {
            const val = document.getElementById(type === 'static' ? 'search-input-static' : 'search-input-interactive').value.toLowerCase();
            document.querySelectorAll(type === 'static' ? '.static-row' : '.interactive-row').forEach(row => {
                const name = (row.getAttribute('data-name') || row.innerText).toLowerCase();
                row.style.display = name.includes(val) ? 'table-row' : 'none';
            });
        }

        document.addEventListener('DOMContentLoaded', () => { 
            generatePriceList(); 
            document.querySelectorAll('.quantity-select').forEach(s => s.innerHTML = generateWeightOptions(s.getAttribute('data-unit')));
        });
    </script>
</body>
</html>